---
description: '為 GitHub Copilot 建立高品質自訂指示檔案的指南'
applyTo: '**/*.instructions.md'
---

# 自訂指示檔案指南

建立有效且可維護的自訂指示檔案的說明，以引導 GitHub Copilot 產生特定領域的程式碼並遵循專案慣例。

## 專案上下文

- 目標受眾：開發人員和 GitHub Copilot，處理特定領域的程式碼
- 檔案格式：帶有 YAML 前置資料的 Markdown
- 檔案命名慣例：小寫帶連字號 (例如，`react-best-practices.instructions.md`)
- 位置：`.github/instructions/` 目錄
- 目的：為程式碼產生、檢閱和文件提供上下文感知指南

## 必要的 YAML 前置資料

每個指示檔案都必須包含帶有以下欄位的 YAML 前置資料：

```yaml
---
description: '指示目的和範圍的簡要描述'
applyTo: '目標檔案的 glob 模式 (例如，**/*.ts, **/*.py)'
---
```

### YAML 前置資料指南

- **description**：單引號字串，1-500 個字元，清楚說明目的
- **applyTo**：指定這些指示適用於哪些檔案的 glob 模式
  - 單一模式：`'**/*.ts'`
  - 多個模式：`'**/*.ts, **/*.tsx, **/*.js'`
  - 特定檔案：`'src/**/*.py'`
  - 所有檔案：`'**'`

## 檔案結構

結構良好的指示檔案應包含以下部分：

### 1. 標題和概述

- 使用 `#` 標題的清晰、描述性標題
- 簡要介紹目的和範圍
- 選用：包含關鍵技術和版本的專案上下文部分

### 2. 核心部分

根據領域將內容組織成邏輯部分：

- **一般指示**：高階指南和原則
- **最佳實務**：推薦的模式和方法
- **程式碼標準**：命名慣例、格式、樣式規則
- **架構/結構**：專案組織和設計模式
- **常見模式**：常用實作
- **安全性**：安全性考量 (如果適用)
- **效能**：優化指南 (如果適用)
- **測試**：測試標準和方法 (如果適用)

### 3. 範例和程式碼片段

提供帶有清晰標籤的具體範例：

```markdown
### 良好範例
\`\`\`language
// 推薦方法
這裡的程式碼範例
\`\`\`

### 不良範例
\`\`\`language
// 避免這種模式
這裡的程式碼範例
\`\`\`
```

### 4. 驗證和確認 (選用但推薦)

- 用於驗證程式碼的建構命令
- Linting 和格式化工具
- 測試要求
- 確認步驟

## 內容指南

### 寫作風格

- 使用清晰、簡潔的語言
- 使用祈使語氣 (「使用」、「實作」、「避免」)
- 具體且可操作
- 避免模糊的術語，例如「應該」、「可能」、「或許」
- 使用項目符號和列表以提高可讀性
- 保持部分內容集中且可掃描

### 最佳實務

- **具體**：提供具體範例，而不是抽象概念
- **說明原因**：在增加價值時解釋建議背後的原因
- **使用表格**：用於比較選項、列出規則或顯示模式
- **包含範例**：實際的程式碼片段比描述更有效
- **保持最新**：參考當前版本和最佳實務
- **連結資源**：包含官方文件和權威來源

### 要包含的常見模式

1. **命名慣例**：如何命名變數、函式、類別、檔案
2. **程式碼組織**：檔案結構、模組組織、匯入順序
3. **錯誤處理**：首選的錯誤處理模式
4. **依賴項**：如何管理和記錄依賴項
5. **註解和文件**：何時以及如何記錄程式碼
6. **版本資訊**：目標語言/框架版本

## 要遵循的模式

### 項目符號和列表

```markdown
## 安全性最佳實務

- 在處理使用者輸入之前，務必驗證使用者輸入
- 使用參數化查詢以防止 SQL 注入
- 將機密儲存在環境變數中，切勿儲存在程式碼中
- 實作適當的驗證和授權
- 為所有生產端點啟用 HTTPS
```

### 結構化資訊的表格

```markdown
## 常見問題

| 問題            | 解決方案            | 範例                       |
| ---------------- | ------------------- | ----------------------------- |
| 魔術數字    | 使用命名常數 | `const MAX_RETRIES = 3`       |
| 深度巢狀     | 提取函式   | 重構巢狀 if 語句 |
| 硬式編碼值 | 使用組態   | 將 API URL 儲存在組態中      |
```

### 程式碼比較

```markdown
### 良好範例 - 使用 TypeScript 介面
\`\`\`typescript
interface User {
  id: string;
  name: string;
  email: string;
}

function getUser(id: string): User {
  // 實作
}
\`\`\`

### 不良範例 - 使用任何類型
\`\`\`typescript
function getUser(id: any): any {
  // 失去類型安全
}
\`\`\`
```

### 條件式指南

```markdown
## 框架選擇

- **對於小型專案**：使用 Minimal API 方法
- **對於大型專案**：使用基於控制器的架構，並明確分離
- **對於微服務**：考慮領域驅動設計模式
```

## 要避免的模式

- **過於冗長的解釋**：保持簡潔且可掃描
- **過時的資訊**：始終參考當前版本和實務
- **模糊的指南**：具體說明要做什麼或避免什麼
- **缺少範例**：沒有具體程式碼範例的抽象規則
- **矛盾的建議**：確保整個檔案的一致性
- **從文件複製貼上**：透過提煉和情境化來增加價值

## 測試您的指示

在完成指示檔案之前：

1. **使用 Copilot 測試**：在 VS Code 中使用實際提示嘗試指示
2. **驗證範例**：確保程式碼範例正確且執行無誤
3. **檢查 Glob 模式**：確認 `applyTo` 模式與預期檔案匹配

## 範例結構

以下是新指示檔案的最小範例結構：

```markdown
---
description: '目的簡要描述'
applyTo: '**/*.ext'
---

# 技術名稱開發

簡要介紹和上下文。

## 一般指示

- 高階指南 1
- 高階指南 2

## 最佳實務

- 特定實務 1
- 特定實務 2

## 程式碼標準

### 命名慣例
- 規則 1
- 規則 2

### 檔案組織
- 結構 1
- 結構 2

## 常見模式

### 模式 1
描述和範例

\`\`\`language
程式碼範例
\`\`\`

### 模式 2
描述和範例

## 驗證

- 建構命令：`要驗證的命令`
- Linting：`要 lint 的命令`
- 測試：`要測試的命令`
```

## 維護

- 當依賴項或框架更新時檢閱指示
- 更新範例以反映當前的最佳實務
- 移除過時的模式或已淘汰的功能
- 隨著社群中出現新模式而新增
- 隨著專案結構的演變，保持 glob 模式的準確性

## 其他資源

- [自訂指示文件](https://code.visualstudio.com/docs/copilot/customization/custom-instructions)
- [Awesome Copilot 指示](https://github.com/github/awesome-copilot/tree/main/instructions)
