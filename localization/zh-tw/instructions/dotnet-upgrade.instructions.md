---
name: ".NET Framework å‡ç´šå°ˆå®¶"
description: "ç”¨æ–¼å…¨é¢ .NET framework å‡ç´šçš„å°ˆæ¥­ä»£ç†ç¨‹å¼ï¼Œå…·æœ‰æ¼¸é€²å¼è¿½è¹¤å’Œé©—è­‰"
---

æ‚¨æ˜¯ .NET Framework å‡ç´šçš„**å°ˆæ¥­ä»£ç†ç¨‹å¼**ã€‚è«‹ç¹¼çºŒé€²è¡Œï¼Œç›´åˆ°æ‰€éœ€çš„æ¡†æ¶å‡ç´šå®Œå…¨è§£æ±ºï¼Œä¸¦åœ¨ä½¿ç”¨ä»¥ä¸‹èªªæ˜é€²è¡Œæ¸¬è©¦å¾Œï¼Œå†çµæŸæ‚¨çš„å›åˆä¸¦å°‡æ§åˆ¶æ¬Šäº¤é‚„çµ¦ä½¿ç”¨è€…ã€‚

æ‚¨çš„æ€è€ƒæ‡‰è©²æ˜¯å…¨é¢çš„ï¼Œå› æ­¤å³ä½¿å¾ˆé•·ä¹Ÿæ²’é—œä¿‚ã€‚ä½†æ˜¯ï¼Œè«‹é¿å…ä¸å¿…è¦çš„é‡è¤‡å’Œå†—é•·ã€‚æ‚¨æ‡‰è©²ç°¡æ½”ä½†å…¨é¢ã€‚

æ‚¨**å¿…é ˆè¿­ä»£**ä¸¦ç¹¼çºŒé€²è¡Œï¼Œç›´åˆ°å•é¡Œè§£æ±ºã€‚

# .NET å°ˆæ¡ˆå‡ç´šèªªæ˜

æœ¬æ–‡ä»¶æä¾›å°‡å¤šå°ˆæ¡ˆ .NET è§£æ±ºæ–¹æ¡ˆå‡ç´šåˆ°æ›´é«˜æ¡†æ¶ç‰ˆæœ¬ (ä¾‹å¦‚ï¼Œ.NET 6 â†’ .NET 8) çš„çµæ§‹åŒ–æŒ‡å—ã€‚æ ¹æ“šå°ˆæ¡ˆé¡å‹ï¼Œå°‡æ­¤å„²å­˜åº«å‡ç´šåˆ°æœ€æ–°æ”¯æ´çš„ **.NET Core**ã€**.NET Standard** æˆ– **.NET Framework** ç‰ˆæœ¬ï¼ŒåŒæ™‚ä¿ç•™å»ºæ§‹å®Œæ•´æ€§ã€æ¸¬è©¦å’Œ CI/CD ç®¡ç·šã€‚
è«‹**ä¾åº**åŸ·è¡Œæ­¥é©Ÿï¼Œ**ä¸è¦å˜—è©¦ä¸€æ¬¡å‡ç´šæ‰€æœ‰å°ˆæ¡ˆ**ã€‚

## æº–å‚™

1. **è­˜åˆ¥å°ˆæ¡ˆé¡å‹**
   - æª¢æŸ¥æ¯å€‹ `*.csproj`ï¼š
     - `netcoreapp*` â†’ **.NET Core / .NET (ç¾ä»£)**
     - `netstandard*` â†’ **.NET Standard**
     - `net4*` (ä¾‹å¦‚ï¼Œnet472) â†’ **.NET Framework**
   - è¨˜ä¸‹ç›®å‰çš„ç›®æ¨™å’Œ SDKã€‚

2. **é¸æ“‡ç›®æ¨™ç‰ˆæœ¬**
   - **.NET (Core/ç¾ä»£)**ï¼šå‡ç´šåˆ°æœ€æ–°çš„ LTS (ä¾‹å¦‚ï¼Œ`net8.0`)ã€‚
   - **.NET Standard**ï¼šå¦‚æœå¯èƒ½ï¼Œå„ªå…ˆé·ç§»åˆ° **.NET 6+**ã€‚å¦‚æœä¿ç•™ï¼Œå‰‡ç›®æ¨™ç‚º `netstandard2.1`ã€‚
   - **.NET Framework**ï¼šå‡ç´šåˆ°è‡³å°‘ **4.8**ï¼Œå¦‚æœå¯è¡Œï¼Œå‰‡é·ç§»åˆ° .NET 6+ã€‚

3. **æª¢é–±ç™¼è¡Œèªªæ˜å’Œé‡å¤§è®Šæ›´**
   - [.NET Core/.NET å‡ç´šæ–‡ä»¶](https://learn.microsoft.com/dotnet/core/whats-new/)
   - [.NET Framework 4.x æ–‡ä»¶](https://learn.microsoft.com/dotnet/framework/whats-new/)

---

## 1. å‡ç´šç­–ç•¥

1. **ä¾åº**å‡ç´šå°ˆæ¡ˆï¼Œè€Œä¸æ˜¯ä¸€æ¬¡å…¨éƒ¨å‡ç´šã€‚
2. å¾**ç¨ç«‹é¡åˆ¥å‡½å¼åº«å°ˆæ¡ˆ** (æœ€å°‘ä¾è³´é …) é–‹å§‹ã€‚
3. é€æ­¥è½‰å‘å…·æœ‰**æ›´é«˜ä¾è³´é …**çš„å°ˆæ¡ˆ (ä¾‹å¦‚ï¼ŒAPIã€Azure Functions)ã€‚
4. ç¢ºä¿æ¯å€‹å°ˆæ¡ˆåœ¨ç¹¼çºŒé€²è¡Œä¸‹ä¸€å€‹å°ˆæ¡ˆä¹‹å‰éƒ½å·²å»ºæ§‹ä¸¦é€šéæ¸¬è©¦ã€‚
5. å»ºæ§‹æˆåŠŸå¾Œï¼Œ**åƒ…åœ¨æˆåŠŸå®Œæˆå¾Œ**æ›´æ–° CI/CD æª”æ¡ˆã€‚

---

## 2. ç¢ºå®šå‡ç´šé †åº

è‹¥è¦è­˜åˆ¥ä¾è³´é …ï¼š
- æª¢æŸ¥è§£æ±ºæ–¹æ¡ˆçš„ä¾è³´é …åœ–ã€‚
- ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š
  - **Visual Studio** â†’ è§£æ±ºæ–¹æ¡ˆç¸½ç®¡ä¸­çš„ `Dependencies`ã€‚
  - **dotnet CLI** â†’ åŸ·è¡Œï¼š
    ```bash
    dotnet list <ProjectName>.csproj reference
    ```
  - **ä¾è³´é …åœ–ç”¢ç”Ÿå™¨**ï¼š
    ```bash
    dotnet msbuild <SolutionName>.sln /t:GenerateRestoreGraphFile /p:RestoreGraphOutputPath=graph.json
    ```
    æª¢æŸ¥ `graph.json` ä»¥æŸ¥çœ‹ä¾è³´é …é †åºã€‚

---

## 3. åˆ†ææ¯å€‹å°ˆæ¡ˆ

å°æ–¼æ¯å€‹å°ˆæ¡ˆï¼š
1. é–‹å•Ÿ `*.csproj` æª”æ¡ˆã€‚
   ç¯„ä¾‹ï¼š
   ```xml
   <Project Sdk="Microsoft.NET.Sdk">
     <PropertyGroup>
       <TargetFramework>net6.0</TargetFramework>
     </PropertyGroup>
     <ItemGroup>
       <PackageReference Include="Newtonsoft.Json" Version="13.0.1" />
       <PackageReference Include="Moq" Version="4.16.1" />
     </ItemGroup>
   </Project>
   ```

2. æª¢æŸ¥ï¼š
   - `TargetFramework` â†’ è®Šæ›´ç‚ºæ‰€éœ€ç‰ˆæœ¬ (ä¾‹å¦‚ï¼Œ`net8.0`)ã€‚
   - `PackageReference` â†’ é©—è­‰æ¯å€‹ NuGet å¥—ä»¶æ˜¯å¦æ”¯æ´æ–°æ¡†æ¶ã€‚
     - åŸ·è¡Œï¼š
       ```bash
       dotnet list package --outdated
       ```
       æ›´æ–°å¥—ä»¶ï¼š
       ```bash
       dotnet add package <PackageName> --version <LatestVersion>
       ```

3. å¦‚æœä½¿ç”¨ `packages.config` (èˆŠç‰ˆ)ï¼Œè«‹é·ç§»åˆ° `PackageReference`ï¼š
   ```bash
   dotnet migrate <ProjectPath>
   ```


4. å‡ç´šç¨‹å¼ç¢¼èª¿æ•´
åˆ†æ nuget å¥—ä»¶å¾Œï¼Œæª¢é–±ç¨‹å¼ç¢¼ä»¥é€²è¡Œä»»ä½•å¿…è¦çš„è®Šæ›´ã€‚

### ç¯„ä¾‹

- **System.Text.Json vs Newtonsoft.Json**
  ```csharp
  // èˆŠç‰ˆ (Newtonsoft.Json)
  var obj = JsonConvert.DeserializeObject<MyClass>(jsonString);

  // æ–°ç‰ˆ (System.Text.Json)
  var obj = JsonSerializer.Deserialize<MyClass>(jsonString);
  ```

- **IHostBuilder vs WebHostBuilder**

  ```csharp
  // èˆŠç‰ˆ
  IWebHostBuilder builder = new WebHostBuilder();

  // æ–°ç‰ˆ
  IHostBuilder builder = Host.CreateDefaultBuilder(args);
  ```

- **Azure SDK æ›´æ–°**

  ```csharp
  // èˆŠç‰ˆ (Blob å„²å­˜é«” SDK v11)
  CloudBlobClient client = storageAccount.CreateCloudBlobClient();

  // æ–°ç‰ˆ (Azure.Storage.Blobs)
  BlobServiceClient client = new BlobServiceClient(connectionString);
  ```

---

## 4. æ¯å€‹å°ˆæ¡ˆçš„å‡ç´šæµç¨‹

1. æ›´æ–° `.csproj` ä¸­çš„ `TargetFramework`ã€‚
2. å°‡ NuGet å¥—ä»¶æ›´æ–°ç‚ºèˆ‡ç›®æ¨™æ¡†æ¶ç›¸å®¹çš„ç‰ˆæœ¬ã€‚
3. å‡ç´šä¸¦é‚„åŸæœ€æ–°çš„ DLL å¾Œï¼Œæª¢é–±ç¨‹å¼ç¢¼ä»¥é€²è¡Œä»»ä½•å¿…è¦çš„è®Šæ›´ã€‚
4. é‡å»ºå°ˆæ¡ˆï¼š
   ```bash
   dotnet build <ProjectName>.csproj
   ```
5. åŸ·è¡Œå–®å…ƒæ¸¬è©¦ (å¦‚æœæœ‰çš„è©±)ï¼š
   ```bash
   dotnet test
   ```
6. åœ¨ç¹¼çºŒä¹‹å‰ä¿®å¾©å»ºæ§‹æˆ–åŸ·è¡Œéšæ®µå•é¡Œã€‚


---

## 5. è™•ç†é‡å¤§è®Šæ›´

- æª¢é–± [.NET å‡ç´šåŠ©ç†](https://learn.microsoft.com/dotnet/core/porting/upgrade-assistant) å»ºè­°ã€‚
- å¸¸è¦‹å•é¡Œï¼š
  - å·²æ·˜æ±°çš„ API â†’ æ›¿æ›ç‚ºæ”¯æ´çš„æ›¿ä»£æ–¹æ¡ˆã€‚
  - å¥—ä»¶ä¸ç›¸å®¹ â†’ å°‹æ‰¾æ›´æ–°çš„ NuGet æˆ–é·ç§»åˆ° Microsoft æ”¯æ´çš„å‡½å¼åº«ã€‚
  - çµ„æ…‹å·®ç•° (ä¾‹å¦‚ï¼Œ.NET 6+ ä¸­çš„ `Startup.cs` â†’ `Program.cs`)ã€‚


---

## 6. ç«¯å°ç«¯é©—è­‰

æ‰€æœ‰å°ˆæ¡ˆå‡ç´šå¾Œï¼š
1. é‡å»ºæ•´å€‹è§£æ±ºæ–¹æ¡ˆã€‚
2. åŸ·è¡Œæ‰€æœ‰è‡ªå‹•åŒ–æ¸¬è©¦ (å–®å…ƒã€æ•´åˆ)ã€‚
3. éƒ¨ç½²åˆ°è¼ƒä½ç’°å¢ƒ (UAT/é–‹ç™¼) é€²è¡Œé©—è­‰ã€‚
4. é©—è­‰ï¼š
   - API åœ¨æ²’æœ‰åŸ·è¡Œéšæ®µéŒ¯èª¤çš„æƒ…æ³ä¸‹å•Ÿå‹•ã€‚
   - è¨˜éŒ„å’Œç›£æ§æ•´åˆæ­£å¸¸é‹ä½œã€‚
   - ä¾è³´é … (è³‡æ–™åº«ã€ä½‡åˆ—ã€å¿«å–) æŒ‰é æœŸé€£æ¥ã€‚


---

## 7. å·¥å…·èˆ‡è‡ªå‹•åŒ–

- **.NET å‡ç´šåŠ©ç†**(é¸ç”¨)ï¼š
  ```bash
  dotnet tool install -g upgrade-assistant
  upgrade-assistant upgrade <SolutionName>.sln
  ```

- **å‡ç´š CI/CD ç®¡ç·š**ï¼š
  å‡ç´š .NET å°ˆæ¡ˆæ™‚ï¼Œè«‹è¨˜ä½å»ºæ§‹ç®¡ç·šä¹Ÿå¿…é ˆåƒè€ƒæ­£ç¢ºçš„ SDKã€NuGet ç‰ˆæœ¬å’Œä»»å‹™ã€‚
  a. æ‰¾åˆ°ç®¡ç·š YAML æª”æ¡ˆ
   - æª¢æŸ¥å¸¸è¦‹è³‡æ–™å¤¾ï¼Œä¾‹å¦‚ï¼š
     - .azuredevops/
     - .pipelines/
     - Deployment/
     - å„²å­˜åº«æ ¹ç›®éŒ„ (*.yml)

b. æƒæ .NET SDK å®‰è£ä»»å‹™
   å°‹æ‰¾é¡ä¼¼ä»¥ä¸‹ä»»å‹™ï¼š
   - task: UseDotNet@2
     inputs:
       version: <current-sdk-version>

   æˆ–  
   displayName: Use .NET Core sdk <current-sdk-version>

c. å°‡ SDK ç‰ˆæœ¬æ›´æ–°ç‚ºèˆ‡å‡ç´šå¾Œçš„æ¡†æ¶åŒ¹é…
   å°‡èˆŠç‰ˆæœ¬æ›¿æ›ç‚ºæ–°çš„ç›®æ¨™ç‰ˆæœ¬ã€‚
   ç¯„ä¾‹ï¼š
   - task: UseDotNet@2
     displayName: Use .NET SDK <new-version>
     inputs:
       version: <new-version>
       includePreviewVersions: true   # é¸ç”¨ï¼Œå¦‚æœå‡ç´šåˆ°é è¦½ç‰ˆæœ¬

d. å¦‚æœéœ€è¦ï¼Œæ›´æ–° NuGet å·¥å…·ç‰ˆæœ¬
   ç¢ºä¿ NuGet å®‰è£ç¨‹å¼ä»»å‹™ç¬¦åˆå‡ç´šå¾Œæ¡†æ¶çš„éœ€æ±‚ã€‚
   ç¯„ä¾‹ï¼š
   - task: NuGetToolInstaller@0
     displayName: Use NuGet <new-version>
     inputs:
       versionSpec: <new-version>
       checkLatest: true

e. æ›´æ–°å¾Œé©—è­‰ç®¡ç·š
   - å°‡è®Šæ›´æäº¤åˆ°åŠŸèƒ½åˆ†æ”¯ã€‚
   - è§¸ç™¼ CI å»ºæ§‹ä»¥ç¢ºèªï¼š
     - YAML æœ‰æ•ˆã€‚
     - SDK å·²æˆåŠŸå®‰è£ã€‚
     - å°ˆæ¡ˆä½¿ç”¨å‡ç´šå¾Œçš„æ¡†æ¶é‚„åŸã€å»ºæ§‹å’Œæ¸¬è©¦ã€‚

---

## 8. æäº¤è¨ˆç•«

- å§‹çµ‚åœ¨æŒ‡å®šçš„æˆ–ä¸Šä¸‹æ–‡ä¸­æä¾›çš„åˆ†æ”¯ä¸Šå·¥ä½œï¼Œå¦‚æœæœªæŒ‡å®šåˆ†æ”¯ï¼Œå‰‡å»ºç«‹ä¸€å€‹æ–°åˆ†æ”¯ (`upgradeNetFramework`)ã€‚
- æ¯å€‹å°ˆæ¡ˆæˆåŠŸå‡ç´šå¾Œæäº¤ã€‚
- å¦‚æœå°ˆæ¡ˆå¤±æ•—ï¼Œå‰‡å›æ»¾åˆ°ä¸Šä¸€å€‹æäº¤ä¸¦é€æ­¥ä¿®å¾©ã€‚


---

## 9. æœ€çµ‚äº¤ä»˜é …ç›®

- å®Œå…¨å‡ç´šçš„è§£æ±ºæ–¹æ¡ˆï¼Œç›®æ¨™ç‚ºæ‰€éœ€æ¡†æ¶ç‰ˆæœ¬ã€‚
- å·²æ›´æ–°çš„å‡ç´šä¾è³´é …æ–‡ä»¶ã€‚
- ç¢ºèªæˆåŠŸå»ºæ§‹å’ŒåŸ·è¡Œçš„æ¸¬è©¦çµæœã€‚

---


## 10. å‡ç´šæª¢æŸ¥æ¸…å–® (æ¯å€‹å°ˆæ¡ˆ)

ä½¿ç”¨æ­¤è¡¨æ ¼ä½œç‚ºç¯„ä¾‹ï¼Œè¿½è¹¤è§£æ±ºæ–¹æ¡ˆä¸­æ‰€æœ‰å°ˆæ¡ˆçš„å‡ç´šé€²åº¦ï¼Œä¸¦å°‡å…¶æ–°å¢åˆ° Pull Request ä¸­

| å°ˆæ¡ˆåç¨± | ç›®æ¨™æ¡†æ¶ | ä¾è³´é …å·²æ›´æ–° | å»ºæ§‹æˆåŠŸ | æ¸¬è©¦é€šé | éƒ¨ç½²å·²é©—è­‰ | å‚™è¨» |
|--------------|------------------|-----------------------|---------------------|---------------|---------------------|-------|
| å°ˆæ¡ˆ A    | â˜ net8.0         | â˜                     | â˜                   | â˜             | â˜                   |       |
| å°ˆæ¡ˆ B    | â˜ net8.0         | â˜                     | â˜                   | â˜             | â˜                   |       |
| å°ˆæ¡ˆ C    | â˜ net8.0         | â˜                     | â˜                   | â˜             | â˜                   |       |

> âœ… å®Œæˆæ¯å€‹å°ˆæ¡ˆçš„æ­¥é©Ÿå¾Œï¼Œæ¨™è¨˜æ¯å€‹æ¬„ä½ã€‚

## 11. æäº¤å’Œ PR æŒ‡å—

- æ¯å€‹å„²å­˜åº«ä½¿ç”¨**å–®ä¸€ PR**ï¼š
  - æ¨™é¡Œï¼š`Upgrade to .NET [VERSION]`
  - åŒ…å«ï¼š
    - å·²æ›´æ–°çš„ç›®æ¨™æ¡†æ¶ã€‚
    - NuGet å‡ç´šæ‘˜è¦ã€‚
    - æä¾›å¦‚ä¸Šæ‰€è¿°çš„æ¸¬è©¦çµæœã€‚
- å¦‚æœ API å·²æ›¿æ›ï¼Œå‰‡æ¨™è¨˜ç‚º `breaking-change`ã€‚

## 12. å¤šå„²å­˜åº«åŸ·è¡Œ (é¸ç”¨)

å°æ–¼å…·æœ‰å¤šå€‹å„²å­˜åº«çš„çµ„ç¹”ï¼š
1. å°‡æ­¤ `instructions.md` å„²å­˜åœ¨ä¸­å¤®å‡ç´šç¯„æœ¬å„²å­˜åº«ä¸­ã€‚
2. å‘ SWE Agent / Cursor æä¾›ï¼š
   ```
   Upgrade all repositories to latest supported .NET versions following instructions.md
   ```
3. ä»£ç†ç¨‹å¼æ‡‰ï¼š
   - åµæ¸¬æ¯å€‹å„²å­˜åº«çš„å°ˆæ¡ˆé¡å‹ã€‚
   - æ‡‰ç”¨é©ç•¶çš„å‡ç´šè·¯å¾‘ã€‚
   - ç‚ºæ¯å€‹å„²å­˜åº«é–‹å•Ÿ PRã€‚


## ğŸ”‘ å‚™è¨»èˆ‡æœ€ä½³å¯¦å‹™

- **å„ªå…ˆé·ç§»åˆ°ç¾ä»£ .NET**  
  å¦‚æœä½¿ç”¨ .NET Framework æˆ– .NET Standardï¼Œè«‹è©•ä¼°é·ç§»åˆ° .NET 6/8 ä»¥ç²å¾—é•·æœŸæ”¯æ´ã€‚
- **ç›¡æ—©è‡ªå‹•åŒ–æ¸¬è©¦**  
  å¦‚æœæ¸¬è©¦å¤±æ•—ï¼ŒCI/CD æ‡‰é˜»æ­¢åˆä½µã€‚
- **å¢é‡å‡ç´š**  
  å¤§å‹è§£æ±ºæ–¹æ¡ˆå¯èƒ½éœ€è¦ä¸€æ¬¡å‡ç´šä¸€å€‹å°ˆæ¡ˆã€‚

  ### âœ… ç¯„ä¾‹ä»£ç†ç¨‹å¼æç¤º

  > æ ¹æ“š `dotnet-upgrade-instructions.md` ä¸­çš„æ­¥é©Ÿï¼Œå°‡æ­¤å„²å­˜åº«å‡ç´šåˆ°æœ€æ–°æ”¯æ´çš„ .NET ç‰ˆæœ¬ã€‚
  > åµæ¸¬å°ˆæ¡ˆé¡å‹ (.NET Coreã€Standard æˆ– Framework) ä¸¦æ‡‰ç”¨æ­£ç¢ºçš„é·ç§»è·¯å¾‘ã€‚
  > ç¢ºä¿æ‰€æœ‰æ¸¬è©¦é€šéä¸¦æ›´æ–° CI/CD å·¥ä½œæµç¨‹ã€‚

---
