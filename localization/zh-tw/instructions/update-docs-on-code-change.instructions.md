--- 
description: '當應用程式程式碼變更需要更新文件時，自動更新 README.md 與文件檔案' 
applyTo: '**/*.{md,js,mjs,cjs,ts,tsx,jsx,py,java,cs,go,rb,php,rs,cpp,c,h,hpp}' 
---

# 程式碼變更時更新文件

## 概述

透過自動偵測 README.md、API 文件、組態指南與其他文件檔案何時需要根據程式碼修改進行更新，確保文件與程式碼變更保持同步。

## 指示區塊與組態

本節的以下部分，「指示區塊與可組態指示區塊」與「指示組態」僅與此指示檔案相關，旨在提供一種方法，可輕鬆修改副駕駛指示的實作方式。本質上，這兩個部分旨在開啟或關閉實際副駕駛指示的某些部分或區塊，並允許在何時以及如何實作本文件某些區塊的自訂案例與條件。

### 指示區塊與可組態指示區塊

本文件中有幾個指示區塊。指示區塊的開頭由二級標題指示。稱之為**指示區塊**。某些指示區塊是可組態的。有些是不可組態的，將始終使用。

可組態的指示區塊不是必需的，並且受制於其他上下文和/或條件。稱之為**可組態指示區塊**。

**可組態指示區塊**將在其二級標題後附加區塊的組態屬性，並以反引號包裝 (例如，`apply-this`)。稱之為**可組態屬性**。

**可組態屬性**將在本節的**指示組態**部分中宣告與定義。它們是布林值。如果為 `true`，則應用、利用和/或遵循該區塊中的指示。

每個**可組態指示區塊**也將在區塊的二級標題後附帶一個句子，其中包含區塊的組態詳細資訊。稱之為**組態詳細資訊**。

**組態詳細資訊**是規則的子集，其擴展了可組態指示區塊。這允許檢查自訂案例和/或條件，以確定該**可組態指示區塊**的最終實作。

在確定如何應用**可組態指示區塊**之前，請檢查**可組態屬性**是否有巢狀和/或相應的 `apply-condition`，並在確定**可組態指示區塊**的最終方法時利用 `apply-condition`。預設情況下，每個**可組態屬性**的 `apply-condition` 都未設定，但已設定 `apply-condition` 的範例可能如下所示：

    - **apply-condition** : 
      ` this.parent.property = (git.branch == "master") ? this.parent.property = true : this.parent.property = false; `

所有**常數指示區塊**與**可組態指示區塊**的總和將決定要遵循的完整指示。稱之為**編譯指示**。

**編譯指示**取決於組態。**編譯指示**中包含的每個指示區塊都將被解釋和利用，如同它是獨立於整個指示檔案的單獨指示集。稱之為**最終程序**。

### 指示組態

- **apply-doc-file-structure**：true
  - **apply-condition**：未設定
- **apply-doc-verification**：true
  - **apply-condition**：未設定
- **apply-doc-quality-standard**：true
  - **apply-condition**：未設定
- **apply-automation-tooling**：true
  - **apply-condition**：未設定
- **apply-doc-patterns**：true
  - **apply-condition**：未設定
- **apply-best-practices**：true
  - **apply-condition**：未設定
- **apply-validation-commands**：true
  - **apply-condition**：未設定
- **apply-maintenance-schedule**：true
  - **apply-condition**：未設定
- **apply-git-integration**：false
  - **apply-condition**：未設定

<!--
| 組態屬性 | 預設值 | 說明 | 何時啟用/停用 |
|---|---|---|---|
| apply-doc-file-structure | true | 確保文件遵循一致的檔案結構。 | 如果您想要允許自由形式的文件組織，請停用。 |
| apply-doc-verification | true | 驗證文件是否與程式碼變更相符。 | 如果驗證在其他地方處理，請停用。 |
| apply-doc-quality-standard | true | 強制執行文件品質標準。 | 如果不需要品質標準，請停用。 |
| apply-automation-tooling | true | 使用自動化工具更新文件。 | 如果您更喜歡手動更新文件，請停用。 |
| apply-doc-patterns | true | 套用常見的文件模式與範本。 | 對於自訂或非傳統的文件樣式，請停用。 |
| apply-best-practices | true | 強制執行文件中的最佳實踐。 | 如果最佳實踐不是優先事項，請停用。 |
| apply-validation-commands | true | 執行驗證命令以檢查文件正確性。 | 如果不需要驗證，請停用。 |
| apply-maintenance-schedule | true | 排程定期文件維護。 | 如果維護以不同方式管理，請停用。 |
| apply-git-integration | false | 將文件更新與 Git 工作流程整合。 | 如果您想要自動 Git 整合，請啟用。 |
-->
## 何時更新文件

### 觸發條件

自動檢查何時需要更新文件：

- 新增功能或特性
- API 端點、方法或介面變更
- 引入破壞性變更
- 依賴項或要求變更
- 組態選項或環境變數修改
- 安裝或設定程序變更
- 命令列介面或指令碼更新
- 文件中的程式碼範例過時

## 文件更新規則

### README.md 更新

**始終在以下情況下更新 README.md：**

- 新增功能或特性
  - 將功能描述新增至「功能」區塊
  - 如適用，包含使用範例
  - 如果存在，更新目錄

- 修改安裝或設定程序
  - 更新「安裝」或「入門」區塊
  - 修訂依賴項要求
  - 更新先決條件清單

- 新增 CLI 命令或選項
  - 文件命令語法與範例
  - 包含選項描述與預設值
  - 新增使用範例

- 變更組態選項
  - 更新組態範例
  - 文件新的環境變數
  - 更新組態檔範本

### API 文件更新

**在以下情況下同步 API 文件：**

- 新增端點
  - 文件 HTTP 方法、路徑、參數
  - 包含請求/回應範例
  - 更新 OpenAPI/Swagger 規格

- 端點簽章變更
  - 更新參數清單
  - 修訂回應架構
  - 文件破壞性變更

- 身份驗證或授權變更
  - 更新身份驗證範例
  - 修訂安全要求
  - 更新 API 金鑰/權杖文件

### 程式碼範例同步

**在以下情況下驗證並更新程式碼範例：**

- 函式簽章變更
  - 更新所有使用該函式的程式碼片段
  - 驗證範例仍可編譯/執行
  - 如有需要，更新匯入語句

- API 介面變更
  - 更新範例請求與回應
  - 修訂客戶端程式碼範例
  - 更新 SDK 使用範例

- 最佳實踐演變
  - 替換範例中過時的模式
  - 更新為使用目前推薦的方法
  - 為舊模式新增棄用通知

### 組態文件

**在以下情況下更新組態文件：**

- 新增環境變數
  - 新增至 .env.example 檔
  - 在 README.md 或 docs/configuration.md 中記錄
  - 包含預設值與描述

- 組態檔結構變更
  - 更新範例組態檔
  - 文件新選項
  - 標記已棄用選項

- 部署組態變更
  - 更新 Docker/Kubernetes 組態
  - 修訂部署指南
  - 更新基礎設施即程式碼範例

### 移轉與破壞性變更

**在以下情況下建立移轉指南：**

- 發生破壞性 API 變更
  - 文件變更的內容
  - 提供變更前後的範例
  - 包含逐步移轉指示

- 主要版本更新
  - 列出所有破壞性變更
  - 提供升級檢查清單
  - 包含常見的移轉問題與解決方案

- 棄用功能
  - 明確標記已棄用功能
  - 建議替代方法
  - 包含移除時間表

## 文件檔案結構 `apply-doc-file-structure`

如果 `apply-doc-file-structure == true`，則應用以下可組態指示區塊。

### 標準文件檔案

維護這些文件檔案並根據需要更新：

- **README.md**：專案概述、快速入門、基本用法
- **CHANGELOG.md**：版本歷史記錄與使用者面對的變更
- **docs/**：詳細文件
  - `installation.md`：設定與安裝指南
  - `configuration.md`：組態選項與範例
  - `api.md`：API 參考文件
  - `contributing.md`：貢獻指南
  - `migration-guides/`：版本移轉指南
- **examples/**：工作程式碼範例與教學課程

### 變更日誌管理

**為以下內容新增變更日誌條目：**

- 新功能 (在「新增」區塊下)
- 錯誤修復 (在「修復」區塊下)
- 破壞性變更 (在「變更」區塊下，帶有 **BREAKING** 前綴)
- 已棄用功能 (在「已棄用」區塊下)
- 已移除功能 (在「已移除」區塊下)
- 安全修復 (在「安全」區塊下)

**變更日誌格式：**

    ```markdown
    ## [版本] - YYYY-MM-DD

    ### 新增
    - 新功能描述，並參考 PR/問題

    ### 變更
    - **破壞性變更**：破壞性變更的描述
    - 其他變更

    ### 修復
    - 錯誤修復描述
    ```

## 文件驗證 `apply-doc-verification`

如果 `apply-doc-verification == true`，則應用以下可組態指示區塊。

### 在應用變更之前

**檢查文件的完整性：**

1. 所有新的公共 API 都已記錄
2. 程式碼範例可編譯與執行
3. 文件中的連結有效
4. 組態範例正確
5. 安裝步驟是最新的
6. README.md 反映當前狀態

### 文件測試

**包含文件驗證：**

#### 範例任務

- 驗證文件中的程式碼範例可編譯/執行
- 檢查損壞的內部/外部連結
- 針對架構驗證組態範例
- 確保 API 範例與當前實作相符

    ```bash
    # 範例驗證命令
    npm run docs:check         # 驗證文件建構
    npm run docs:test-examples # 測試程式碼範例
    npm run docs:lint         # 檢查問題
    ```

## 文件品質標準 `apply-doc-quality-standard`

如果 `apply-doc-quality-standard == true`，則應用以下可組態指示區塊。

### 寫作指南

- 使用清晰、簡潔的語言
- 包含工作程式碼範例
- 提供基本與進階範例
- 使用一致的術語
- 包含錯誤處理範例
- 文件邊緣案例與限制

### 程式碼範例格式

    ```markdown
    ### 範例：[對範例所演示內容的清晰描述]

    \`\`\`language
    // 包含必要的匯入/設定
    import { function } from 'package';

    // 完整、可執行的範例
    const result = function(parameter);
    console.log(result);
    \`\`\`

    **輸出：**
    \`\`\`
    預期輸出
    \`\`\`
    ```

### API 文件格式

    ```markdown
    ### `functionName(param1, param2)`

    函式功能的簡要描述。

    **參數：**
    - `param1` (類型)：參數的描述
    - `param2` (類型，可選)：帶有預設值的描述

    **傳回值：**
    - `類型`：傳回值的描述

    **範例：**
    \`\`\`language
    const result = functionName('值', 42);
    \`\`\`

    **拋出：**
    - `錯誤類型`：何時以及為何拋出錯誤
    ```

## 自動化與工具 `apply-automation-tooling`

如果 `apply-automation-tooling == true`，則應用以下可組態指示區塊。

### 文件產生

**在可用時使用自動化工具：**

#### 自動化工具範例

- JSDoc/TSDoc 用於 JavaScript/TypeScript
- Sphinx/pdoc 用於 Python
- Javadoc 用於 Java
- xmldoc 用於 C#
- godoc 用於 Go
- rustdoc 用於 Rust

### 文件 Linting

**使用以下內容驗證文件：**

- Markdown linters (markdownlint)
- 連結檢查器 (markdown-link-check)
- 拼寫檢查器 (cspell)
- 程式碼範例驗證器

### 更新前掛鉤

**新增預提交檢查：**

- 文件建構成功
- 沒有損壞的連結
- 程式碼範例有效
- 變更日誌條目存在

## 常見文件模式 `apply-doc-patterns`

如果 `apply-doc-patterns == true`，則應用以下可組態指示區塊。

### 功能文件範本

    ```markdown
    ## 功能名稱

    功能的簡要描述。

    ### 用法

    帶有程式碼片段的基本用法範例。

    ### 組態

    帶有範例的組態選項。

    ### 進階用法

    複雜情境與邊緣案例。

    ### 疑難排解

    常見問題與解決方案。
    ```

### API 端點文件範本

    ```markdown
    ### `HTTP_METHOD /api/endpoint`

    端點功能的描述。

    **請求：**
    \`\`\`json
    {
      "參數": "值"
    }
    \`\`\`

    **回應：**
    \`\`\`json
    {
      "結果": "值"
    }
    \`\`\`

    **狀態碼：**
    - 200：成功
    - 400：錯誤請求
    - 401：未經授權
    ```

## 最佳實踐 `apply-best-practices`

如果 `apply-best-practices == true`，則應用以下可組態指示區塊。

### 應該做

- ✅ 在程式碼變更的同一次提交中更新文件
- ✅ 包含變更前後的範例，以便在應用之前進行審查
- ✅ 在提交之前測試程式碼範例
- ✅ 使用一致的格式與術語
- ✅ 文件限制與邊緣案例
- ✅ 為破壞性變更提供移轉路徑
- ✅ 保持文件 DRY (連結而非重複)

### 不應該做

- ❌ 在未更新文件的情況下提交程式碼變更
- ❌ 在文件中留下過時的範例
- ❌ 文件尚未存在的功能
- ❌ 使用模糊或含糊的語言
- ❌ 忘記更新變更日誌
- ❌ 忽略損壞的連結或失敗的範例
- ❌ 文件使用者不需要的實作細節

## 驗證範例命令 `apply-validation-commands`

如果 `apply-validation-commands == true`，則應用以下可組態指示區塊。

應用於您的專案以進行文件驗證的範例指令碼：

```json
{
  "scripts": {
    "docs:build": "建構文件",
    "docs:test": "測試文件中的程式碼範例",
    "docs:lint": "對文件檔案進行 Lint 檢查",
    "docs:links": "檢查損壞的連結",
    "docs:spell": "拼寫檢查文件",
    "docs:validate": "執行所有文件檢查"
  }
}
```

## 維護排程 `apply-maintenance-schedule`

如果 `apply-maintenance-schedule == true`，則應用以下可組態指示區塊。

### 定期審查

- **每月**：審查文件的準確性
- **每個版本**：更新版本號與範例
- **每季**：檢查過時的模式或已棄用功能
- **每年**：全面文件稽核

### 棄用程序

棄用功能時：

1. 在文件中新增棄用通知
2. 更新範例以使用推薦的替代方案
3. 建立移轉指南
4. 在變更日誌中更新棄用通知
5. 設定移除時間表
6. 在下一個主要版本中，移除已棄用功能與文件

## Git 整合 `apply-git-integration`

如果 `apply-git-integration == true`，則應用以下可組態指示區塊。

### 拉取請求要求

**文件必須在程式碼變更的同一個 PR 中更新：**

- 在功能 PR 中記錄新功能
- 程式碼變更時更新範例
- 包含程式碼變更的變更日誌條目
- 介面變更時更新 API 文件

### 文件審查

**在程式碼審查期間，驗證：**

- 文件準確地描述了變更
- 範例清晰完整
- 沒有未記錄的破壞性變更
- 變更日誌條目適當
- 如有需要，提供移轉指南

## 審查檢查清單

在考慮文件完整並總結**最終程序**之前：

- [ ] **編譯指示**基於**常數指示區塊**與**可組態指示區塊**的總和
- [ ] README.md 反映了當前的專案狀態
- [ ] 所有新功能都已記錄
- [ ] 程式碼範例已測試並可運作
- [ ] API 文件完整準確
- [ ] 組態範例是最新的
- [ ] 破壞性變更已記錄並提供移轉指南
- [ ] CHANGELOG.md 已更新
- [ ] 連結有效且未損壞
- [ ] 安裝指示是最新的
- [ ] 環境變數已記錄

## 程式碼變更時更新文件的目標

- 盡可能讓文件與程式碼接近
- 使用文件產生器生成 API 參考
- 維護隨程式碼演進的活文件
- 將文件視為功能完整性的一部分
- 在程式碼審查中審查文件
- 使文件易於查找與導航
