---
description: "Node.js 與 JavaScript 程式撰寫及 Vitest 測試指引"
applyTo: '**/*.js, **/*.mjs, **/*.cjs'
---

# 程式碼產生器指引

## 程式撰寫標準
- 使用支援 ES2022 的 JavaScript 及 Node.js（20+）ESM 模組
- 優先使用 Node.js 內建模組，盡量避免外部相依套件
- 若需新增相依套件，請先詢問使用者
- 非同步程式碼一律使用 async/await，並用 'node:util' 的 promisify 函式避免 callback
- 程式碼保持簡潔易維護
- 變數與函式命名具描述性
- 除非絕對必要，否則不加註解，程式碼應自明
- 絕不使用 `null`，可選值一律用 `undefined`
- 優先使用函式而非類別

## 測試
- 使用 Vitest 進行測試
- 所有新功能與修正皆需撰寫測試
- 測試需涵蓋邊界情境與錯誤處理
- 絕不為了方便測試而修改原始程式碼，測試必須涵蓋原始程式碼本身

## 文件
- 新增功能或重大變更時，必要時更新 README.md 文件

## 與使用者互動
- 若對實作細節、設計選擇或需求有疑問，請主動詢問
- 回答時語言需與問題一致，但產生的內容如程式碼、註解或文件請用英文
