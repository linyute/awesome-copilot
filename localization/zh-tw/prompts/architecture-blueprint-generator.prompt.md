---
description: '全面性的專案架構藍圖產生器，能分析程式碼庫並建立詳細的架構文件。自動偵測技術堆疊與架構模式，產生視覺化原理圖，記錄實作模式，並提供可延展的藍圖以維持架構一致性並指引新開發。'
---

# 全面性專案架構藍圖產生器

## 設定變數
${PROJECT_TYPE="自動偵測|.NET|Java|React|Angular|Python|Node.js|Flutter|其他"} <!-- 主要技術 -->
${ARCHITECTURE_PATTERN="自動偵測|乾淨架構|微服務|分層|MVVM|MVC|六角|事件驅動|無伺服器|單體|其他"} <!-- 主要架構模式 -->
${DIAGRAM_TYPE="C4|UML|流程|元件|無"} <!-- 架構原理圖類型 -->
${DETAIL_LEVEL="高層次|詳細|全面|可實作"} <!-- 包含細節層級 -->
${INCLUDES_CODE_EXAMPLES=true|false} <!-- 是否包含程式碼範例以說明模式 -->
${INCLUDES_IMPLEMENTATION_PATTERNS=true|false} <!-- 是否包含詳細實作模式 -->
${INCLUDES_DECISION_RECORDS=true|false} <!-- 是否包含架構決策記錄 -->
${FOCUS_ON_EXTENSIBILITY=true|false} <!-- 是否強調延展點與模式 -->

## 產生的提示

「請建立一份完整的 'Project_Architecture_Blueprint.md' 文件，徹底分析程式碼庫中的架構模式，作為維持架構一致性的權威參考。請依下列方式進行：

### 1. 架構偵測與分析
- ${PROJECT_TYPE == "自動偵測" ? "分析專案結構以辨識所有使用中的技術堆疊與框架，方法包括：
  - 專案與設定檔
  - 套件相依與匯入語句
  - 框架特有模式與慣例
  - 建構與部署設定" : "聚焦於 ${PROJECT_TYPE} 特定模式與實踐"}
  
- ${ARCHITECTURE_PATTERN == "自動偵測" ? "藉由分析下列項目判斷架構模式：
  - 資料夾組織與命名空間
  - 相依流程與元件邊界
  - 介面分離與抽象模式
  - 元件間通訊機制" : "記錄 ${ARCHITECTURE_PATTERN} 架構的實作方式"}

### 2. 架構概述
- 清楚簡明地說明整體架構方法
- 記錄架構選擇所體現的指導原則
- 辨識架構邊界及其強化方式
- 註明任何混合式架構模式或標準模式的調整

### 3. 架構視覺化
${DIAGRAM_TYPE != "無" ? `以多層次抽象建立 ${DIAGRAM_TYPE} 原理圖：
- 高層次架構概覽，顯示主要子系統
- 元件互動原理圖，顯示關係與相依
- 資料流程原理圖，顯示資訊在系統中的流動
- 確保原理圖忠實反映實際實作而非理論模式` : "根據實際程式碼相依關係描述元件關係，並以文字清楚說明：
- 子系統組織與邊界
- 相依方向與元件互動
- 資料流程與處理序列"}

### 4. 核心架構元件
針對程式碼庫中發現的每個架構元件：

- **目的與責任**：
  - 在架構中的主要功能
  - 涉及的業務領域或技術議題
  - 邊界與範疇限制

- **內部結構**：
  - 元件內類別/模組的組織方式
  - 主要抽象與其實作
  - 所用設計模式

- **互動模式**：
  - 元件如何與其他元件溝通
  - 暴露與消費的介面
  - 相依性注入模式
  - 事件發布/訂閱機制

- **演化模式**：
  - 元件如何延展
  - 變異點與外掛機制
  - 設定與客製化方式

### 5. 架構分層與相依
- 繪製程式碼庫實作的分層結構
- 記錄分層間的相依規則
- 辨識促成分層分離的抽象機制
- 註明任何循環相依或分層違規
- 記錄維持分離的相依性注入模式

### 6. 資料架構
- 記錄領域模型結構與組織
- 繪製實體關係與聚合模式
- 辨識資料存取模式（儲存庫、資料映射等）
- 記錄資料轉換與映射方式
- 註明快取策略與實作
- 記錄資料驗證模式

### 7. 橫切關注點實作
記錄橫切關注點的實作模式：

- **認證與授權**：
  - 資安模型實作
  - 權限強制模式
  - 身分管理方法
  - 資安邊界模式

- **錯誤處理與韌性**：
  - 例外處理模式
  - 重試與斷路器實作
  - 回退與優雅降級策略
  - 錯誤回報與監控方法

- **日誌與監控**：
  - 儀表化模式
  - 可觀測性實作
  - 診斷資訊流程
  - 效能監控方法

- **驗證**：
  - 輸入驗證策略
  - 業務規則驗證實作
  - 驗證責任分配
  - 錯誤回報模式

- **設定管理**：
  - 設定來源模式
  - 依環境調整設定策略
  - 機密管理方法
  - 功能旗標實作

### 8. 服務通訊模式
- 記錄服務邊界定義
- 辨識通訊協定與格式
- 繪製同步與非同步通訊模式
- 記錄 API 版本管理策略
- 辨識服務發現機制
- 註明服務通訊的韌性模式

### 9. 技術特定架構模式
${PROJECT_TYPE == "自動偵測" ? "針對每個偵測到的技術堆疊，記錄特定架構模式：" : `記錄 ${PROJECT_TYPE} 特定架構模式：`}

${(PROJECT_TYPE == ".NET" || PROJECT_TYPE == "自動偵測") ? 
"#### .NET 架構模式（如偵測到）
- 主機與應用程式模型實作
- 中介軟體管線組織
- 框架服務整合模式
- ORM 與資料存取方式
- API 實作模式（控制器、最小 API 等）
- 相依性注入容器設定" : ""}

${(PROJECT_TYPE == "Java" || PROJECT_TYPE == "自動偵測") ? 
"#### Java 架構模式（如偵測到）
- 應用程式容器與啟動流程
- 相依性注入框架使用（Spring、CDI 等）
- AOP 實作模式
- 交易邊界管理
- ORM 設定與使用模式
- 服務實作模式" : ""}

${(PROJECT_TYPE == "React" || PROJECT_TYPE == "自動偵測") ? 
"#### React 架構模式（如偵測到）
- 元件組合與重用策略
- 狀態管理架構
- 副作用處理模式
- 路由與導覽方法
- 資料擷取與快取模式
- 渲染最佳化策略" : ""}

${(PROJECT_TYPE == "Angular" || PROJECT_TYPE == "自動偵測") ? 
"#### Angular 架構模式（如偵測到）
- 模組組織策略
- 元件階層設計
- 服務與相依性注入模式
- 狀態管理方法
- Reactive 程式設計模式
- 路由守衛實作" : ""}

${(PROJECT_TYPE == "Python" || PROJECT_TYPE == "自動偵測") ? 
"#### Python 架構模式（如偵測到）
- 模組組織方法
- 相依管理策略
- OOP 與函式式實作模式
- 框架整合模式
- 非同步程式設計方法" : ""}

### 10. 實作模式
${INCLUDES_IMPLEMENTATION_PATTERNS ? 
"記錄關鍵架構元件的具體實作模式：

- **介面設計模式**：
  - 介面分離方法
  - 抽象層級決策
  - 泛用與特定介面模式
  - 預設實作模式

- **服務實作模式**：
  - 服務生命週期管理
  - 服務組合模式
  - 操作實作範本
  - 服務內錯誤處理

- **儲存庫實作模式**：
  - 查詢模式實作
  - 交易管理
  - 平行處理
  - 批次操作模式

- **控制器/API 實作模式**：
  - 請求處理模式
  - 回應格式化方法
  - 參數驗證
  - API 版本管理實作

- **領域模型實作**：
  - 實體實作模式
  - 值物件模式
  - 領域事件實作
  - 業務規則強制" : "註明詳細實作模式依程式碼庫而異。"}

### 11. 測試架構
- 記錄與架構一致的測試策略
- 辨識測試邊界模式（單元、整合、系統）
- 繪製測試替身與模擬方法
- 記錄測試資料策略
- 註明測試工具與框架整合

### 12. 部署架構
- 根據設定記錄部署拓撲
- 辨識依環境調整的架構適應
- 繪製執行時相依解析模式
- 記錄跨環境設定管理
- 辨識容器化與編排方法
- 註明雲端服務整合模式

### 13. 延展與演化模式
${FOCUS_ON_EXTENSIBILITY ? 
"提供延展架構的詳細指引：

- **功能新增模式**：
  - 如何在維持架構完整性的前提下新增功能
  - 依元件類型放置新元件的位置
  - 相依引入指引
  - 設定延展模式

- **修改模式**：
  - 如何安全地修改既有元件
  - 維持向下相容性的策略
  - 停用模式
  - 移轉方法

- **整合模式**：
  - 如何整合新外部系統
  - 配接器實作模式
  - 防腐層模式
  - 服務外觀實作" : "記錄架構中的關鍵延展點。"}

${INCLUDES_CODE_EXAMPLES ? 
"### 14. 架構模式範例
擷取具代表性的程式碼片段以說明關鍵架構模式：

- **分層分離範例**：
  - 介面定義與實作分離
  - 跨層溝通模式
  - 相依性注入範例

- **元件溝通範例**：
  - 服務呼叫模式
  - 事件發布與處理
  - 訊息傳遞實作

- **延展點範例**：
  - 外掛註冊與發現
  - 延展介面實作
  - 設定驅動延展模式

每個範例都需有足夠背景以清楚展現模式，但內容要簡潔聚焦於架構概念。" : ""}

${INCLUDES_DECISION_RECORDS ? 
"### 15. 架構決策記錄
記錄程式碼庫中明顯的關鍵架構決策：

- **架構風格決策**：
  - 為何選擇目前架構模式
  - 曾考慮的替代方案（依程式碼演進）
  - 影響決策的限制條件

- **技術選擇決策**：
  - 關鍵技術選擇及其架構影響
  - 框架選擇理由
  - 自訂元件與現成元件的決策

- **實作方法決策**：
  - 選用的具體實作模式
  - 標準模式的調整
  - 效能與可維護性的取捨

每項決策需註明：
- 促使決策的情境
- 決策時考量的因素
- 結果影響（正面與負面）
- 導致的未來彈性或限制" : ""}

### ${INCLUDES_DECISION_RECORDS ? "16" : INCLUDES_CODE_EXAMPLES ? "15" : "14"}. 架構治理
- 記錄如何維持架構一致性
- 辨識架構合規的自動檢查
- 註明程式碼庫中的架構審查流程
- 記錄架構文件化實踐

### ${INCLUDES_DECISION_RECORDS ? "17" : INCLUDES_CODE_EXAMPLES ? "16" : "15"}. 新開發藍圖
請建立清楚的架構指引以實作新功能：

- **開發流程**：
  - 各類型功能的起始點
  - 元件建立順序
  - 與既有架構整合步驟
  - 依架構分層的測試方法

- **實作範本**：
  - 關鍵架構元件的基礎類別/介面範本
  - 新元件的標準檔案組織
  - 相依宣告模式
  - 文件需求

- **常見陷阱**：
  - 應避免的架構違規
  - 常見架構錯誤
  - 效能考量
  - 測試盲點

請註明本藍圖產生時間，並提供架構演進時的更新建議。
"

---

**免責聲明**：本文件由 [GitHub Copilot](https://docs.github.com/copilot/about-github-copilot/what-is-github-copilot) 在地化。故可能包含錯誤。如發現不適當或錯誤翻譯，請至 [issue](../../issues) 回報。
