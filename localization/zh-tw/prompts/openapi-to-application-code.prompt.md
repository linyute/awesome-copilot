---
agent: 'agent'
description: '從 OpenAPI 規格產生完整且可用於生產環境的應用程式'
model: 'GPT-4.1'
tools: ['codebase', 'edit/editFiles', 'search/codebase']
---

# 從 OpenAPI 規格產生應用程式

你的目標是使用目前使用的框架慣例和最佳實踐，從 OpenAPI 規格產生一個完整且可執行的應用程式。

## 輸入要求

1. **OpenAPI 規格**：提供以下其中一項：
   - OpenAPI 規格的 URL (例如：`https://api.example.com/openapi.json`)
   - OpenAPI 規格的本地檔案路徑
   - 直接貼上完整的 OpenAPI 規格內容

2. **專案詳細資訊** (如果規格中未註明)：
   - 專案名稱與說明
   - 目標框架與版本
   - 套件/命名空間命名慣例
   - 驗證方法 (如果 OpenAPI 中未指定)

## 產生程序

### 步驟 1：分析 OpenAPI 規格
- 驗證 OpenAPI 規格的完整性和正確性
- 識別所有端點、HTTP 方法、請求/回應結構描述 (Schema)
- 擷取驗證要求和安全性配置
- 記錄資料模型關係與條件約束
- 標記任何模糊不清或未定義完整的定義

### 步驟 2：設計應用程式架構
- 規劃適合該框架的目錄結構
- 按資源或網域識別控制器 (Controller)/處理常式 (Handler) 分組
- 為商業邏輯設計服務層 (Service Layer) 組織方式
- 規劃資料模型與實體關係
- 設計組態與初始化策略

### 步驟 3：產生應用程式程式碼
- 建立包含建構/套件組態檔案的專案結構
- 從 OpenAPI 結構描述產生模型 (Model)/DTO
- 產生具備路由映射的控制器/處理常式
- 產生具備商業邏輯的服務層
- 產生儲存庫 (Repository)/資料存取層 (如果適用)
- 加入錯誤處理、驗證與記錄 (Logging)
- 產生組態與啟動程式碼

### 步驟 4：加入支援檔案
- 為服務與控制器產生適當的單元測試
- 建立包含設定與執行指示的 README
- 加入 .gitignore 和環境變數組態範本
- 產生 API 文件檔案
- 建立範例請求/整合測試

## 輸出結構

產生的應用程式將包含：

```
project-name/
├── README.md                      # 設定與使用指示
├── [build-config]                 # 框架特定的建構檔案 (pom.xml, build.gradle, package.json 等)
├── src/
│   ├── main/
│   │   ├── [language]/
│   │   │   ├── controllers/       # HTTP 端點處理常式
│   │   │   ├── services/          # 商業邏輯
│   │   │   ├── models/            # 資料模型與 DTO
│   │   │   ├── repositories/      # 資料存取 (如果適用)
│   │   │   └── config/            # 應用程式組態
│   │   └── resources/             # 組態檔案
│   └── test/
│       ├── [language]/
│       │   ├── controllers/       # 控制器測試
│       │   └── services/          # 服務測試
│       └── resources/             # 測試組態
├── .gitignore
├── .env.example                   # 環境變數範本
└── docker-compose.yml             # 選用：Docker 設定 (如果適用)
```

## 套用的最佳實踐

- **框架慣例**：遵循特定框架的命名、結構與模式
- **關注點分離**：具備控制器、服務與儲存庫的清晰分層
- **錯誤處理**：具備具意義回應的全面性錯誤處理
- **驗證**：全程進行輸入驗證與結構描述驗證
- **記錄 (Logging)**：用於偵錯與監控的結構化記錄
- **測試**：服務與控制器的單元測試
- **文件**：內嵌程式碼文件與設定指示
- **安全性**：實作 OpenAPI 規格中的驗證/授權
- **延展性**：支援成長與維護的設計模式

## 後續步驟

產生後：

1. 審閱產生的程式碼結構並根據需要進行自訂
2. 根據框架要求安裝相依性
3. 設定環境變數與資料庫連線
4. 執行測試以驗證產生的程式碼
5. 啟動開發伺服器
6. 使用提供的範例測試端點

## 如果需要可詢問的問題

- 應用程式是否應包含資料庫/ORM 設定，或僅使用記憶體內/模擬資料？
- 你是否需要用於容器化的 Docker 組態？
- 驗證應使用 JWT、OAuth2、API 金鑰還是基本驗證？
- 你需要整合測試還是僅需單元測試？
- 有任何特定的資料庫技術偏好嗎？
- API 是否應包含分頁、篩選與排序範例？
