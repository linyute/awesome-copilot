# AS6C62256 (32K x 8 SRAM) 模擬規格

這是一份技術性的 Markdown 規格，用於**模擬 AS6C62256 / 62256 家族靜態 RAM**，適用於 6502 系列模擬器、SBC 模擬器及記憶體子系統建模。

---

## 1. 範圍

此文件詳述模擬以下元件的功能行為：

* Alliance Memory **AS6C62256**
* 相容的 **62256 (32K x 8) SRAM** 元件

不在此範圍內：

* 類比電氣定時邊限
* 匯流排爭用與訊號上升/下降時間
* 功率消耗特性

---

## 2. 晶片概述

### 核心特性

| 特性 | 數值 |
| -------------- | -------------------- |
| 記憶體類型 | 靜態 RAM (SRAM) |
| 容量 | 32,768 位元組 (32 KB) |
| 資料寬度 | 8 位元 |
| 位址寬度 | 15 位元 (A0-A14) |
| 存取類型 | 非同步 |
| 電源電壓 | 5 V (典型值) |

---

## 3. 外部訊號 (邏輯模型)

| 訊號 | 方向 | 用途 |
| ------ | --------- | -------------------------- |
| A0-A14 | 輸入 | 位址匯流排 |
| D0-D7 | I/O | 資料匯流排 |
| CE# | 輸入 | 晶片致能 (低電位有效) |
| OE# | 輸入 | 輸出致能 (低電位有效) |
| WE# | 輸入 | 寫入致能 (低電位有效) |

> `#` 表示低電位有效 (active-low) 訊號。

---

## 4. 位址空間映射

* 位址範圍：`0x0000-0x7FFF`
* 位址線為每個位址選擇一個位元組

### 典型 6502 系統映射範例

| CPU 位址範圍 | 元件 |
| ----------------- | -------------- |
| `$0000-$7FFF` | AS6C62256 SRAM |
| `$8000-$FFFF` | ROM / EEPROM |

---

## 5. 讀取與寫入行為

### 讀取週期 (邏輯)

條件：

* `CE# = 0`
* `OE# = 0`
* `WE# = 1`

行為：

```text
D[7:0]  memory[A]
```

如果 `OE# = 1` 或 `CE# = 1`，資料匯流排為**高阻抗 (Hi-Z)**。

---

### 寫入週期 (邏輯)

條件：

* `CE# = 0`
* `WE# = 0`

行為：

```text
memory[A]  D[7:0]
```

* 在寫入期間忽略 `OE#`
* 寫入發生在有效的 WE# 時

---

## 6. 控制訊號優先權

| CE# | WE# | OE# | 結果 |
| --- | --- | --- | --------------- |
| 1 | X | X | 已停用 (Hi-Z) |
| 0 | 0 | X | 寫入 |
| 0 | 1 | 0 | 讀取 |
| 0 | 1 | 1 | Hi-Z |

---

## 7. 模擬器介面需求

模擬器必須公開：

```text
read(address)  -> byte
write(address, byte)
```

內部儲存：

```text
uint8_t ram[32768]
```

位址遮罩 (Address masking)：

```text
address = address & 0x7FFF
```

---

## 8. 定時模型 (抽象化)

### 模擬等級

| 等級 | 描述 |
| -------------- | ------------------------- |
| 功能性 | 瞬時存取 |
| 基於週期 | 每個 CPU 週期進行存取 |
| 週期準確 | 遵循致能狀態轉換 |

對於大多數系統，**功能性模擬**已足夠。

---

## 9. 電源與資料保留

* 只要通電，SRAM 內容就會保留
* 模擬器應保留內容，直到明確重設

### 重設行為

* 重設時**不會自動清除**
* 記憶體內容為未定義，除非已初始化

---

## 10. 匯流排爭用與 Hi-Z 建模 (選配)

選配的進階行為：

* 追蹤 SRAM 何時驅動資料匯流排
* 偵測非法的同時寫入

大多數模擬器可以忽略 Hi-Z 狀態。

---

## 11. 錯誤條件

| 條件 | 模擬器回應 |
| -------------------- | ----------------------------- |
| 位址超出範圍 | 遮罩或忽略 |
| 已停用時讀取 | 回傳最後一個匯流排數值或 0xFF |
| 已停用時寫入 | 忽略寫入 |

---

## 12. 與 6502 模擬器整合

```text
CPU 記憶體存取
  位址解碼
  如果在 SRAM 範圍內：
      AS6C62256.read/write
```

* SRAM 存取通常為單週期
* 無需等待狀態 (wait states)

---

## 13. 測試與驗證

### 基本測試

* 寫入/讀取模式
* 邊界位址 ($0000, $7FFF)
* 隨機化記憶體測試

### 驗證檢查清單

* 寫入持久化
* 讀取回傳正確數值
* 位址回繞正確

---

## 14. 常見錯誤

| 錯誤 | 結果 |
| --------------------- | --------------------------- |
| 重設時清除 RAM | 破壞軟體假設 |
| 錯誤的位址遮罩 | 鏡像記憶體錯誤 |
| 視為 ROM | 寫入被忽略 |

---

## 15. 參考連結

* [Alliance Memory AS6C62256 Datasheet](https://www.alliancememory.com/wp-content/uploads/AS6C62256-23-March-2016-rev1.2.pdf)
* [https://en.wikipedia.org/wiki/Static_random-access_memory](https://en.wikipedia.org/wiki/Static_random-access_memory)

---

**文件範圍：** AS6C62256 SRAM 的軟體模擬
**讀者對象：** 模擬器開發者、復古 SBC 設計者
**狀態：** 穩定的技術參考
